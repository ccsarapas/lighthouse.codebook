<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate a codebook object from REDCap data — cb_create_redcap • lighthouse.codebook</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/Roboto_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Generate a codebook object from REDCap data — cb_create_redcap"><meta name="description" content='cb_create_redcap() builds an object of class "li_codebook" from a dataset and
corresponding codebook exported from REDCap. The resulting object can be used
to write an Excel workbook with variable and data summaries (using cb_write()),
extract processed data (cb_get_data()), or generate dataset summaries (cb_summarize_numeric(),
cb_summarize_categorical(), cb_summarize_text()).
This variant of cb_create() includes functionality specific to REDCap data
and metadata, including:
Defaults for typical REDCap metadata column names
Includes form field by default
Unpacking, labelling, and optional missing propagation for checkbox data
Optional coercion for character variables marked as "integer" in metedata$text_validation_type_or_show_slider_number


All of these behaviors can be controlled using the .options argument.'><meta property="og:description" content='cb_create_redcap() builds an object of class "li_codebook" from a dataset and
corresponding codebook exported from REDCap. The resulting object can be used
to write an Excel workbook with variable and data summaries (using cb_write()),
extract processed data (cb_get_data()), or generate dataset summaries (cb_summarize_numeric(),
cb_summarize_categorical(), cb_summarize_text()).
This variant of cb_create() includes functionality specific to REDCap data
and metadata, including:
Defaults for typical REDCap metadata column names
Includes form field by default
Unpacking, labelling, and optional missing propagation for checkbox data
Optional coercion for character variables marked as "integer" in metedata$text_validation_type_or_show_slider_number


All of these behaviors can be controlled using the .options argument.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">lighthouse.codebook</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/lighthouse-codebook.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ccsarapas/lighthouse.codebook/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate a codebook object from REDCap data</h1>
      <small class="dont-index">Source: <a href="https://github.com/ccsarapas/lighthouse.codebook/blob/v0.3.2/R/cb_create_redcap.r" class="external-link"><code>R/cb_create_redcap.r</code></a></small>
      <div class="d-none name"><code>cb_create_redcap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>cb_create_redcap()</code> builds an object of class <code>"li_codebook"</code> from a dataset and
corresponding codebook exported from REDCap. The resulting object can be used
to write an Excel workbook with variable and data summaries (using <code><a href="cb_write.html">cb_write()</a></code>),
extract processed data (<code><a href="cb_get_data.html">cb_get_data()</a></code>), or generate dataset summaries (<code><a href="cb_summarize_numeric.html">cb_summarize_numeric()</a></code>,
<code><a href="cb_summarize_categorical.html">cb_summarize_categorical()</a></code>, <code><a href="cb_summarize_text.html">cb_summarize_text()</a></code>).</p>
<p>This variant of <code><a href="cb_create.html">cb_create()</a></code> includes functionality specific to REDCap data
and metadata, including:</p><ul><li><p>Defaults for typical REDCap metadata column names</p></li>
<li><p>Includes form field by default</p></li>
<li><p>Unpacking, labelling, and optional missing propagation for checkbox data</p></li>
<li><p>Optional coercion for character variables marked as "integer" in <code>metedata$text_validation_type_or_show_slider_number</code></p></li>
</ul><p>All of these behaviors can be controlled using the <code>.options</code> argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cb_create_redcap</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">metadata</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .user_missing <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .split_var_labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .options <span class="op">=</span> <span class="fu"><a href="cb_create_options.html">cb_create_redcap_options</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame exported or retrieved from REDCap.</p></dd>


<dt id="arg-metadata">metadata<a class="anchor" aria-label="anchor" href="#arg-metadata"></a></dt>
<dd><p>A data frame containing the REDCap codebook associated with <code>data</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional columns from <code>metadata</code> to preserve in the final codebook.
New names can be assigned by passing named arguments. Columns for variable
name, form, variable label, and value labels are included by default.</p></dd>


<dt id="arg--user-missing">.user_missing<a class="anchor" aria-label="anchor" href="#arg--user-missing"></a></dt>
<dd><p>A formula or list of formulas specifying user missing values.
Formulas should specify variables on the left-hand side (as variable names
or <a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">tidyselect</a> expressions), and missing values on the
right-hand side. If left-hand side is omitted, defaults to <code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">tidyselect::everything()</a></code>.
See "Specifying user missing values" in <code><a href="cb_create.html">cb_create()</a></code> documentation  for examples.</p></dd>


<dt id="arg--split-var-labels">.split_var_labels<a class="anchor" aria-label="anchor" href="#arg--split-var-labels"></a></dt>
<dd><p>A <code><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">tidyselect</a></code> expression or list of tidyselect
expressions, indicating (sets of) variable labels with a common stem that should
be extracted into a separate column.</p></dd>


<dt id="arg--options">.options<a class="anchor" aria-label="anchor" href="#arg--options"></a></dt>
<dd><p>Additional options to use for codebook creation. Must be the result
from a call to <code><a href="cb_create_options.html">cb_create_redcap_options()</a></code> or <code><a href="cb_create_options.html">cb_create_options()</a></code>. See <code><a href="cb_create_options.html">?cb_create_redcap_options</a></code>
for available options.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code>"li_codebook"</code> object, consisting of a tibble summarizing the passed
dataset and attributes containing additional metadata. The tibble includes columns:</p><ul><li><p><code>name</code>: variable name</p></li>
<li><p><code>form</code>: form name</p></li>
<li><p><code>type</code>: column containing simplified variable type</p></li>
<li><p><code>class</code>: optional column containing class(es) of each variable</p></li>
<li><p><code>label_stem</code>: optional column containing variable label stems, if any variables
are specified in <code>.split_var_labels</code></p></li>
<li><p><code>label</code>: variable label</p></li>
<li><p><code>values</code>: values, with labels if applicable</p></li>
<li><p><code>user_missing</code>: optional column showing user missing values, with labels
if applicable. By default, this column is included only if user missings
are specified for at least one variable. This behavior can be changed using
the <code>user_missing_col</code> argument to <code><a href="cb_create_options.html">cb_create_options()</a></code>.</p></li>
<li><p><code>missing</code>: proportion missing</p></li>
<li><p>additional columns if specified in <code>...</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="checkbox-data-handling">Checkbox data handling<a class="anchor" aria-label="anchor" href="#checkbox-data-handling"></a></h2>


<div class="section">
<h3 id="value-labels">Value labels<a class="anchor" aria-label="anchor" href="#value-labels"></a></h3>


<p>Data from REDCap checkboxes yields one variable in the dataset for each response
option. By default, these will be labelled generically with <code>"Yes"</code> or <code>"No"</code>.
For example, consider a checkbox group with options "In the past year," "More than a
year ago," and "Never," corresponding to variables <code>chk_var1___0</code>, <code>chk_var1___1</code>,
and <code>chk_var1___2</code>. By default, all of these will be given the same value labels:</p><ul><li><p><code>chk_var1___0</code>, <code>chk_var1___1</code>, <code>chk_var1___2</code>: 0 = "No"; 1 =  "Yes".
This behavior can be changed by setting <code>checkbox_resp_values = TRUE</code> in <code><a href="cb_create_options.html">cb_create_options()</a></code>.
In this case, response-specific labels from <code>metadata</code> will be used, so that
each variable will have unique labels:</p></li>
<li><p><code>chk_var1___0</code>: 0 = "Not selected," 1 = "In the past year"</p></li>
<li><p><code>chk_var1___1</code>: 0 = "Not selected," 1 = "More than a year ago"</p></li>
<li><p><code>chk_var1___2</code>: 0 = "Not selected," 0 = "Never"</p></li>
</ul></div>

<div class="section">
<h3 id="missing-value-propagation">Missing value propagation<a class="anchor" aria-label="anchor" href="#missing-value-propagation"></a></h3>


<p>By default, missing values in a checkbox group will be propagated to all variables
in the group. For example, consider a checkbox group with options "Pregnant,"
"Not pregnant," and "Not applicable," corresponding to variables <code>chk_preg_0___0</code>,
<code>chk_preg_0___1</code>, and <code>chk_preg_0____9</code>, and assuming that <code>-9</code> is specified
as a user missing value. By default, <code>chk_preg_0___0</code> and <code>chk_preg_0___1</code> will
be set to <code>-9</code> if <code>chk_preg_0____9</code> is <code>1</code>. This behavior can be overridden by
setting <code>propagate_checkbox_missings = FALSE</code> in <code><a href="cb_create_options.html">cb_create_options()</a></code>, in which
case no values will be changed.</p>
</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>lighthouse.codebook</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

